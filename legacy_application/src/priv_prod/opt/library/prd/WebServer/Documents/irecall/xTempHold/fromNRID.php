<?php//include("../../include/authPHOTOS.inc");include("../../include/connectPHOTOS.inc");extract($_REQUEST);if($sciName){// connect the NRID running on the 38 machine// cannot JOIN tables on different serversinclude("../../include/connectNRID.38.inc");$where="sciName='$sciName'";$sql = "select dprspp.comName,dprspp.majorGroup as mg,dprspp.orderX from dprspp where $where";$result = @mysql_query($sql, $connectionNR) or die("$sql Error 1#". mysql_errno() . ": " . mysql_error());$row=MYSQL_FETCH_ARRAY($result);extract($row);}$sql = "select photos.images.* from photos.images where pid=$pid";$result = @mysql_query($sql, $connection) or die("$sql Error 1#". mysql_errno() . ": " . mysql_error());$row=MYSQL_FETCH_ARRAY($result);extract($row);    $linkOriginal=$link; //used to pass file location from database$CATgroup = strtoupper(str_replace(",", " ", $cat));Header( "Content-type: text/html");    echo "<HTML><HEAD><TITLE>ID (Image Database)</TITLE></HEAD><BODY><body bgcolor='beige'><script language='JavaScript'>function confirmLink(){bConfirm=confirm('Are you sure you want to delete this Photo?') return (bConfirm);}</script>";    echo "<hr><table><tr><td>Category: $CATgroup</td></tr><tr><td colspan='3'><tr><td>Photo Title: $photoname</td><td>CD Name: $park $cd</td></tr><tr><td>File Name: $filename</td><td>Original File Size: $width x $height pixels</td></tr>";if($photog){echo "<tr><td>Photographer: $photog</td>";}if($date != "0000-00-00"){echo "<td>Date: $date </td>";}if($mg){echo "<tr><td>Group: $mg </td><td>Order: $orderX</td></tr>";}if($sciName){echo "<tr><td>SciName: <i>$sciName</i></td>";}if($comName){echo "<td>ComName: $comName </td>";}$linkFull="<a href='fromNRID.php?pid=$pid&location=$link'>$width x $height</a>";if($width > "1024" || $height > "1024"){$link1024="<a href='fromNRID.php?pid=$pid&location=$link&size=1024'>1024</a>";}if($width > "800" || $height > "800"){$link800="<a href='fromNRID.php?pid=$pid&location=$link&size=800'>800</a>";}if($width > "640" || $height > "640"){$link640="<a href='fromNRID.php?pid=$pid&location=$link&size=640'>640</a>";}echo "</tr></table>";if($comment){echo "<table><tr><td>Comment: $comment</td></tr></table>";}echo "<table><tr><td align='center'>$linkFull</td><td>$link1024</td><td>$link800</td><td>$link640</td></tr></table>";// Works with either photo stored in db or as a fileif(!$location){echo "<img src='getPhoto.php?pid=$pid'>";}	else	{$loc=explode("/",$location); 	switch ($size) {		case "1024":		// code to resize to 1024  resize.php$wid=1024; $hei=1024;$tn=$loc[0]."/".$loc[1]."/".$loc[2]."/1024.".$pid.".jpg";if (file_exists($tn)) {    echo "<img src='$tn'>";} else {include("resize.php");createthumb($location,$tn,$wid,$hei);echo "<img src='$tn'>";}			break;		case "800":		// code to resize to 800  resize.php$wid=800; $hei=800;$tn=$loc[0]."/".$loc[1]."/".$loc[2]."/800.".$pid.".jpg";if (file_exists($tn)) {    echo "<img src='$tn'>";} else {include("resize.php");createthumb($location,$tn,$wid,$hei);echo "<img src='$tn'>";}			break;		case "640":		// code to resize to 640  resize.php$wid=640; $hei=640;$tn=$loc[0]."/".$loc[1]."/".$loc[2]."/640.".$pid.".jpg";if (file_exists($tn)) {    echo "<img src='$tn'>";} else {include("resize.php");createthumb($location,$tn,$wid,$hei);echo "<img src='$tn'>";}			break;		default:			echo "<img src='$location'>";		}	}	echo "</body></html>";?>