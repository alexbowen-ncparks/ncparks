<html><head><title>Faces & Places</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body bgcolor="#F5F1B1"><div align="center"><?php include("header.php"); include("footer.php"); include_once("../../include/connectIRECALL.inc");extract($_REQUEST);echo "<table width='660'>";$type="tradition"; returnNum($type);echo "<tr><th>Traditions: $numrow $view";$type="person"; returnNum($type);echo "<th>Special People: $numrow $view";$type="change1"; returnNum($type);echo "<th>Changes: $numrow $view";$type="photos"; returnNum($type);echo "<th>Photos: $numrow $view";$type="sound"; returnNum($type);echo "<th>Audio/Video: $numrow $view</tr><table>";echo "<div align='center'><table>";// *********** Search Form ***************echo "<form action='search.php'><tr><td><input type='text' name='search' size='15'><input type='submit' name='submit' value='Search'></form></td></tr></table><form></td></tr></table></div>";if($var){if($var=="photos"){$display_number=20;if($newStart){$start=$newStart;}else{$start=0;}$limit="LIMIT $start,$display_number";}$sql="SELECT * FROM irecall.$var where mark='' order by date DESC $limit";$result = @mysql_query($sql, $connection) or die("$sql Error 2#". mysql_errno() . ": " . mysql_error());$numFound=mysql_num_rows($result);$num_pages=$numFound/$display_number;	echo "<hr><table>";	while($row = mysql_fetch_array($result)){extract($row);// Determine what page the script is on.		if ($start == 0) {		$current_page = 1;	} else {		$current_page = ($start/$display_number) + 1;	}	// If it's not the first page, make a Previous button.	if ($start != 0) {	$start=$start-$display_number;	$sql=urlencode($sql);	$pagePrevious="<a href='view.php?start=$start&passSQL=$sql'>Previous</a> ";	}	// Make all the numbered pages.	for ($i = 1; $i <= $num_pages; $i++) {		if ($i != $current_page) { // Don't link the current page.$next_page=$next_page."<a href='view.php?start=$start&passSQL=$sql'> $i </a>";} else {			$next_page=$next_page." $i ";		}	}	 $start=$start+$display_number;	if($var=="person"){$sql1="SELECT count(type) as num FROM irecall.comment where type='$var' and typeid='$personid'";$result1 = @mysql_query($sql1, $connection) or die("$sql Error 2#". mysql_errno() . ": " . mysql_error());$row1 = mysql_fetch_array($result1);extract($row1);if($num>0){$com="<td>Comments: $num</td>";}else{$com="";}$subtext=substr($persontext,0,50);$line="<tr><td><b>$personname</b></td><td><a href='show.php?var=$var&personid=$personid'>Read</a></td><td>$subtext...</td><td>submitted by: $authorname</td>$com</tr>";}if($var=="tradition"){$sql1="SELECT count(type) as num FROM irecall.comment where type='$var' and typeid='$traditionid'";$result1 = @mysql_query($sql1, $connection) or die("$sql Error 2#". mysql_errno() . ": " . mysql_error());$row1 = mysql_fetch_array($result1);extract($row1);if($num>0){$com="<td>Comments: $num</td>";}else{$com="";}$subtext=substr($tradtext,0,50);$line="<tr><td><b>$title</b></td><td><a href='show.php?var=$var&traditionid=$traditionid'>Read</a></td><td>$subtext...</td><td>submitted by: $authorname</td>$com</tr>";}if($var=="change1"){$subtext=substr($changetext,0,50);$line="<tr><td><b>$changename</b></td><td><a href='show.php?var=$var&change1id=$change1id'>Read</a></td><td>$subtext...</td><td>submitted by: $authorname</td></tr>";}if($var=="photos"){$sql1="SELECT count(type) as num FROM irecall.comment where type='$var' and typeid='$pid'";$result1 = @mysql_query($sql1, $connection) or die("$sql Error 2#". mysql_errno() . ": " . mysql_error());$row1 = mysql_fetch_array($result1);extract($row1);if($num>0){$com="<td>Comments: $num</td>";}else{$com="";}$fs=round($filesize/1024);$base="photos/ztn."; $photoLink=$base.$pid.$filename;$subtext=substr($caption,0,50);$line="<tr><td align='center'><a href='getData.php?pid=$pid&location=$link&size=640'><img src='$photoLink'></a></td><td><b>$phototitle</b></td><td>$subtext...</td><td>submitted by: $submitter</td><td>($fs kb)</td>$com</tr>";}echo "$line";}// end whileecho "</table>";}// end ifecho "<table align='center'><tr><td>$pagePrevious</td><td>$next_page</td></tr></table>";function returnNum($type){global $numrow,$connection,$view;$sql="SELECT * FROM irecall.$type where mark=''";$result = @mysql_query($sql, $connection) or die("$sql Error 2#". mysql_errno() . ": " . mysql_error());$numrow = mysql_num_rows($result);if($numrow>0){$view="<br><a href='view.php?var=$type'>List</a></th>";}else{$view="<br>&nbsp;";}}?></div></body></html>