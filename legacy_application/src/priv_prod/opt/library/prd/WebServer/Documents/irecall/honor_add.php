<?phpextract($_REQUEST);    // Data from form is processed$database="irecall";// **************** STORY ***************************    // Show the form to submit a new Storyif (@$submit == "")	{	$sub="Add";	if(@$traditionid)		{		include_once("../../include/connectROOT.inc");		mysql_select_db($database,$connection);		$sub="Update";		$sql="SELECT * FROM irecall.tradition WHERE traditionid='$traditionid'";		$result = @mysql_query($sql, $connection) or die("$sql Error 2#". mysql_errno() . ": " . mysql_error());		$row = mysql_fetch_array($result);		extract($row);		}	if(!isset($title)){$title="";}	if(!isset($authorname)){$authorname="";}	if(!isset($tradtext)){$tradtext="";}	if(!isset($comment)){$comment="";}	if(!isset($traditionid)){$traditionid="";}	echo "<table>	<form method='post' action='honor_add.php' enctype='multipart/form-data'>		<tr><td>Tradition Title:</td></tr><tr><td><textarea cols='60' rows='1' name='title'>$title	</textarea></td></tr>	<tr><td>Tradition submitted by:</td></tr><tr><td><textarea cols='60' rows='1' name='authorname'>$authorname	</textarea></td></tr>	<tr><td>Describe the tradition, and its purpose. Is this tradition still continuing?<br><textarea cols='80' rows='20' name='tradtext'>$tradtext	</textarea><br>	Any Comment from person submitting tradition:<br><textarea cols='80' rows='5' name='comment'>$comment	</textarea></td></tr>	<tr><td align='center'><INPUT TYPE='hidden' name='traditionid' value='$traditionid'><INPUT TYPE='submit' name='submit' value='$sub tradition'>		</form></td></tr></table>";	}if (@$submit == "Add tradition")	{	if(!$tradtext){echo "You must enter a story. Click your Browser's BACK button.";exit;}	include("../../include/connectIRECALL.inc");	//extract ($_FILES);// not needed for text only	mysql_select_db("irecall.tradition");	$authorname=addslashes($authorname);	$title=addslashes($title);	$tradtext=addslashes($tradtext);	$comment=addslashes($comment);		$query="INSERT INTO irecall.tradition SET authorname='$authorname', tradtext='$tradtext',title='$title',comment='$comment'";	//echo "$query";exit;	$result=MYSQL_QUERY($query,$connection);		$mid= mysql_insert_id();		if($mid){	// Display	header("Location:success.php?m=$mid&type=tradition");	}	else	{echo "There was a problem, and your story was not entered. Contact Tom Howard (tom.howard@ncmail.net) for help.";}		}if (@$submit == "Update tradition") {include("../../include/connectIRECALL.inc");//extract ($_FILES);// not needed for text onlymysql_select_db("irecall.tradition");$authorname=addslashes($authorname);$title=addslashes($title);$tradtext=addslashes($tradtext);$comment=addslashes($comment);$query="UPDATE irecall.tradition SET authorname='$authorname', tradtext='$tradtext',title='$title',comment='$comment' where traditionid='$traditionid'";//echo "$query";exit;$result=MYSQL_QUERY($query,$connection);    $mid= mysql_affected_rows();if($mid){// Displayheader("Location:success.php?m=$mid&type=tradition");}else{echo "There was a problem, and your story was not entered. Contact Tom Howard (tom.howard@ncmail.net) for help.";}	}?>