<?php$pier_fees=array("pier_fee_array","pier_mod_array","pier_trans_array");$pier_fee_array=array("check"=>"check_number","date"=>"pier_payment","fee"=>"fee as pier_fee");$pier_mod_array=array("check"=>"pier_mod_check","date"=>"mod_pay_date","fee"=>"mod_fee_amt");$pier_trans_array=array("check"=>"trans_check","date"=>"trans_pay_date","fee"=>"transfer_fee");foreach($pier_fees as $k0=>$v0)	{	$field_list_1=$default_fields;	$fields=${$v0};	foreach($fields as $k1=>$v1)		{		$field_list_1.="t2.".$v1.",";		}	$field_list_1=rtrim($field_list_1,",");		$receipt_clause="t2.".$fields['date']." >= '$start_date' AND t2.".$fields['date']." <= '$end_date'";	$JOIN="LEFT JOIN piers as t2 on t1.id=t2.contacts_id ";	$WHERE="t2.pier_number is not NULL";		if(@$unpaid=="x")		{		$receipt_clause=" and (t2.pier_payment = '' OR t4.ramp_receipt = '' OR t5.buoy_receipt = '' OR t6.swim_line_receipt = '')";		}		$sql="SELECT $field_list_1	FROM  contacts as t1	$JOIN	where 1 	and 	$WHERE	and $receipt_clause	$clause		ORDER BY billing_last_name"; 	//group by t1.id//	echo "$k0 = $sql<br />"; 	//EXIT;	$result1 = mysql_query($sql) or die ("Couldn't execute query. $sql c=$connection");		$num_pay=mysql_num_rows($result1);	//if($num_pay<1){echo "No records found for $park $start_date.";exit;}		while($row=mysql_fetch_assoc($result1))		{		$HEADERS[]=array_keys($row);		$ARRAY[]=$row;		}	}//echo "<pre>"; print_r($ARRAY); echo "</pre>"; // exit;?>