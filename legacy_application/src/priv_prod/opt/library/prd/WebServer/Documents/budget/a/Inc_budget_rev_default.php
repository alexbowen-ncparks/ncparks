<?phpwhile($row=mysqli_fetch_array($result)){extract($row);// Track Totals$spent0203tot=$spent0203tot+$spent0203;// 1$spent0304tot=$spent0304tot+$spent0304;//2$spent0405tot=$spent0405tot+$spent0405;//3$ware0405tot=$ware0405tot+$ware0405;//4$total_spent0405tot=$total_spent0405tot+$total_spent0405;//5$inc0506tot=$inc0506tot+$inc0506;//6//$inc0506_perctot=$inc0506_perctot+$inc0506_perc;//6a$request_0506tot=$request_0506tot+$request_0506;//7$spent0506tot=$spent0506tot+$spent0506;//8$ware0506tot=$ware0506tot+$ware0506;//9$total_spent0506tot=$total_spent0506tot+$total_spent0506;//10$availabletot=$availabletot+$available;//11// Display SubTotalsif($check!="" AND $check!=$$checkField){$subspent0203totF=number_format($subspent0203tot,2);$subspent0304totF=number_format($subspent0304tot,2);$subspent0405totF=number_format($subspent0405tot,2);$subware0405totF=number_format($subware0405tot,2);$subnonware_incdectotF=number_format($subnonware_incdectot,2);$subinc_dectotF=number_format($subinc_dectot,2);//$avePerCent=($subinc0506_perctot/$countPerCent);//$subinc0506_perctotF="Ave. = ".number_format($avePerCent,0)."%";$subrequest_0506totF=number_format($subrequest_0506tot,2);$subspent0506totF=number_format($subspent0506tot,2);$subware0506totF=number_format($subware0506tot,2);$subtotal_spent0506F=number_format($subtotal_spent0506,2);$subRemainingtotF=number_format($subRemainingtot,2);echo "<tr><td align='right' colspan='7'><b>$subspent0203totF</td><td align='right'><b>$subspent0304totF</b></td><td align='right'><b>$subspent0405totF</b></td><td align='right'><b>$subinc_dectotF</b></td><td align='right'><b>$subinc0506_perctotF</b></td><td align='right'><b>$subrequest_0506totF</b></td><td align='right'><b>$subspent0506totF</b></td><td align='right'><b>$subRemainingtotF</b></td></tr>";$subspent0203grand=$subspent0203grand+$subspent0203tot; $subspent0203tot="";$subspent0304grand=$subspent0304grand+$subspent0304tot; $subspent0304tot="";$subspent0405grand=$subspent0405grand+$subspent0405tot; $subspent0405tot="";$subware0405grand=$subware0405grand+$subware0405tot; $subware0405tot="";$subnonware_incdecgrand=$subnonware_incdecgrand+$subnonware_incdectot; $subnonware_incdectot="";$subinc_decgrand=$subinc_decgrand+$subinc_dectot; $subinc_dectot="";$subinc0506_percgrand=$subinc0506_percgrand+$subinc0506_perctot; $subinc0506_perctot="";$subspent0506grand=$subspent0506grand+$subspent0506tot; $subspent0506tot="";$subware0506grand=$subware0506grand+$subware0506tot; $subware0506tot="";$subtotal_spent0506grand=$subtotal_spent0506grand+$subtotal_spent0506; $subtotal_spent0506="";$subrequest_0506grand=$subrequest_0506grand+$subrequest_0506tot; $subrequest_0506tot="";$subRemaininggrand=$subRemaininggrand+$subRemainingtot; $subRemainingtot="";//$countPerCent=0;}// Format for display$spent0203F=number_format($spent0203,2);$spent0304F=number_format($spent0304,2);$spent0405F=number_format($spent0405,2);$ware0405F=number_format($ware0405,2);$total_spent0405F=number_format($total_spent0405,2);$inc0506F=number_format($inc0506,2);if($inc0506_perc==0){$inc0506_percF="-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";}else{$countPerCent++;$inc0506_percF=number_format($inc0506_perc,0)."%";}$request_0506F=number_format($request_0506,2);$spent0506F=number_format($spent0506,2);$ware0506F=number_format($ware0506,2);$total_spent0506F=number_format($total_spent0506,2);$availableF=number_format($available,2);$link0405="<a href='portal_ven_pay.php?dbTable=exp_rev&acct=$ncasnum&center=$center&f_year=0405' target='_blank'>$spent0405F</a>";$link0506="<a href='portal_ven_pay.php?dbTable=exp_rev&acct=$ncasnum&center=$center&f_year=0506' target='_blank'>$spent0506F</a>";$section=strtolower($section);$dist=strtoupper($dist);echo "<tr><td align='right'>$ncasnum</td><td align='right'>$description</td><td align='right'>$section</td><td align='center'>$dist</td><td align='center'>$parkcode</td><td align='right'>$center</td><td align='right'>$spent0203F</td><td align='right'>$spent0304F</td><td align='right'>$link0405</td><td align='right'>$inc0506F</td><td align='right'>$inc0506_percF</td><td align='right'>$request_0506F</td><td align='right'>$link0506</td><td align='right'>$availableF</td></tr>";// Track SubTotals// $subx is used to hold value for last subTotal$subspent0203tot=$subspent0203tot+$spent0203;$sub1=number_format($subspent0203tot,2);$subspent0304tot=$subspent0304tot+$spent0304;$sub2=number_format($subspent0304tot,2);$subspent0405tot=$subspent0405tot+$spent0405;$sub3=number_format($subspent0405tot,2);$subware0405tot=$subware0405tot+$ware0405;$sub4=number_format($subware0405tot,2);$subnonware_incdectot=$subnonware_incdectot+$total_spent0405;$sub5=number_format($subnonware_incdectot,2);$subinc_dectot=$subinc_dectot+$inc0506;$sub6=number_format($subinc_dectot,2);//$subinc0506_perctot=$subinc0506_perctot+$inc0506_perc;//$sub6a=number_format($subinc0506_perctot,2);$subrequest_0506tot=$subrequest_0506tot+$request_0506;$sub7=number_format($subrequest_0506tot,2);$subspent0506tot=$subspent0506tot+$spent0506;$sub8=number_format($subspent0506tot,2);$subRemainingtot=$subRemainingtot+$available;$sub11=number_format($subRemainingtot,2);$check=$$checkField;	}// end while// Format and Display Totals$spent0203totF=number_format($spent0203tot,2);$spent0304totF=number_format($spent0304tot,2);$spent0405totF=number_format($spent0405tot,2);$ware0405totF=number_format($ware0405tot,2);$total_spent0405totF=number_format($total_spent0405tot,2);$inc0506totF=number_format($inc0506tot,2);//$inc0506_perctotF=number_format($inc0506_perctot,2);$request_0506totF=number_format($request_0506tot,2);$spent0506totF=number_format($spent0506tot,2);$ware0506totF=number_format($ware0506tot,2);$total_spent0506totF=number_format($total_spent0506tot,2);$availabletotF=number_format($availabletot,2);// Print Final SubTotalsecho "<tr><td align='right' colspan='7'><b>$sub1</td><td align='right'><b>$sub2</b></td><td align='right'><b>$sub3</b></td><td align='right'><b>$sub6</b></td><td align='right'><b>$sub6a</b></td><td align='right'><b>$sub7</b></td><td align='right'><b>$sub8</b></td><td align='right'><b>$sub11</b></td></tr>";// Print Grand Totalsif($_SESSION[budget][level]>2){$addText="<br>Addition of displayed subtotals: ";$subspent0203grandF=number_format($subspent0203grand+$subspent0203tot,2);$subspent0304grandF=number_format($subspent0304grand+$subspent0304tot,2);$subspent0405grandF=number_format($subspent0405grand+$subspent0405tot,2);$subware0405grandF=number_format($subware0405grand+$subware0405tot,2);$subnonware_incdecgrandF=number_format($subnonware_incdecgrand+$subnonware_incdectot,2);$subinc_decgrandF=number_format($subinc_decgrand+$subinc_dectot,2);//$subinc0506_percgrandF=number_format($subinc0506_percgrand+$subinc0506_perctot,2);$subrequest_0506grandF=number_format($subrequest_0506grand+$subrequest_0506tot,2);$subspent0506grandF=number_format($subspent0506grand+$subspent0506tot,2);$subware0506grandF=number_format($subware0506grand+$subware0506tot,2);$subtotal_spent0506grandF=number_format($subtotal_spent0506grand+$subtotal_spent0506,2);$subrequest_0506grandF=number_format($subrequest_0506grand+$subrequest_0506tot,2);$subRemaininggrandF=number_format($subRemaininggrand+$subRemainingtot,2);}echo "<tr><td align='right' colspan='7'>Grand Total: <b>$spent0203totF</b></td><td align='right'><b>$spent0304totF</b></td><td align='right'><b>$spent0405totF</b></td><td align='right'><b>$inc0506totF</b></td><td align='right'><b>$inc0506_perctotF</b></td><td align='right'><b>$request_0506totF</b></td><td align='right'><b>$spent0506totF</b></td><td align='right'><b>$availabletotF</b></td></tr>";echo "<tr><th>NCAS#</th><th>DESCRIPTION</th><th>SECTION</th><th>DIST</th><th>PARK</th><th>CENTER</th><th>Spent 0203</th><th>Spent 0304</th><th>Spent 0405</th><th>Increase<br>Decrease</th><th>Percent<br>Inc_Dec</th><th>0506 Req</th><th>0506 Spent</th><th>Available</th></tr>";echo "</table></body></html>";?>