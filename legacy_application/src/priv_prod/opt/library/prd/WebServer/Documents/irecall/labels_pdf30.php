<?php$db="irecall";  $abstract_db="natureo3_";      include("../../include/connectNATURE123.inc");$db = mysql_select_db($database,$connection) or die ("Couldn't select database $database");extract($_REQUEST);$select="SELECT * From natureo3_irecall.former_emp where 1 order by Last_name";$sql = "$select $limit";//echo "$sql";exit;$result = mysql_query($sql) or die ("Couldn't execute query. $sql");$num=mysql_num_rows($result);if($num<1){echo "$message";}$totPageNum=ceil($num/30);$affPrint=array("PAC","RRS","CWMTF","PARTF","NHTF","FSP");$i=1;while($row=mysql_fetch_array($result)){extract($row);if($test_combo[$i-1]==$first_name.$last_name.$city){continue;}$lab_nick[]=strtoupper($nickname);$lab_first[]=strtoupper($first_name);$lab_mid[]=strtoupper($m_initial);$lab_last[]=strtoupper($last_name);$lab_title[]=strtoupper($title);$lab_add[]=strtoupper($add1);$lab_city[]=strtoupper($city);$lab_state[]=strtoupper($state);$lab_zip[]=strtoupper($zip);$lab_comments[]=strtoupper($comments);$lab_park[]=strtoupper($park);$lab_affname[]=$affiliation_name;$test_combo[$i]=$first_name.$last_name.$city;$i++;}//echo "<pre>"; print_r($test_combo); echo "</pre>";  exit;// Set the constants and variables.define ("PAGE_WIDTH", 612); // 8.5 inchesdefine ("PAGE_HEIGHT",792); // 11 inches// Make the invoice.	$pdf = pdf_new(); include("/opt/library/prd/WebServer/include/pdf_key_23.php");pdf_open_file ($pdf, "");// Set the different PDF values.pdf_set_info ($pdf, "Author", "Tom Howard");pdf_set_info ($pdf, "Title", "Labels for DPR Steward");pdf_set_info ($pdf, "Creator", "See Author");// ******************** Start Loop ***************$start=0;$pageNum=1;for($p=0;$p<$totPageNum;$p++){// Create the page.pdf_begin_page ($pdf, PAGE_WIDTH, PAGE_HEIGHT);		// Set the default font from here on out.				$arial = PDF_load_font ($pdf, "Helvetica", "winansi", "");		$arialBold = PDF_load_font ($pdf, "Helvetica-Bold", "winansi", "");		$fontSize=10;$lead=$fontSize+3;pdf_setfont ($pdf, $arial, $fontSize);		$verStart=PAGE_HEIGHT-114;$ver=$verStart;$hor=3;$add_hor=16;$hor=$hor+$add_hor;$rr=0;// **************************************************// *********** Start Records from Arrays ************if($totPageNum>1){if($p==0){$end=$start+7;$r=0;}else{$numLines=$numLines-$start;$end=$start+$numLines;}}else{$end=$numLines;$r=0;}for($xx=1;$xx<31;$xx++){	if($rr<10)		{		$hor=3;		$hor=$add_hor;		}if($rr==10){$ver=$verStart;}	if($rr>9 and $rr<20)		{		$hor=199;		$hor=$hor+$add_hor;		}if($rr==20){$ver=$verStart;}	if($rr>19)		{		$hor=399;		$hor=$hor+$add_hor;		}// Make Labelif($lab_first[$r]){$text=$lab_first[$r]." ".$lab_last[$r];$modeB="left";}else{$text=$lab_last[$r];$modeB="left";}/*if($lab_affcode[$r]){if($lab_affcode[$r]=="PAC"){$text.="\n".$lab_park[$r]." - ".$lab_affcode[$r];}else{$text.="\n".$lab_affcode[$r];}}*/$text.="\n".$lab_add[$r]."\n".$lab_city[$r]." ".$lab_state[$r]." ".$lab_zip[$r];$widthB=188; $heightB=72; pdf_show_boxed ($pdf, $text, $hor ,$ver,$widthB,$heightB,$modeB,"");$start++;$r++;$rr++;$ver=$ver-72;}// end for// Finish the pagepdf_end_page ($pdf);$pageNum++;}// end loop of pages// Close the PDFpdf_close ($pdf);// Send the PDF to the browser.$buffer = pdf_get_buffer ($pdf);header ("Content-type: application/pdf");header ("Content-Length: " . strlen($buffer));header ("Content-Disposition: inline; filename=filename.pdf");echo $buffer;// Free the resourcespdf_delete ($pdf);if($type=="Print Custom"){$sql="UPDATE labels set custom=''";$result = mysql_query($sql) or die ("Couldn't execute query. $sql");}?>