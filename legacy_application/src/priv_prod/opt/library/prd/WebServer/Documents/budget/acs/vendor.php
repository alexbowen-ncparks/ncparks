<?phpini_set('display_errors',1);session_start();$database="budget";$db="budget";include("/opt/library/prd/WebServer/include/iConnect.inc"); // connection parameters//echo "<pre>";print_r($_SESSION);echo "</pre>"; //exit;$beacnum=$_SESSION['budget']['beacon_num'];mysqli_select_db($connection,$database);extract($_REQUEST);if(!empty($submit_form)){    $sql = "DELETE FROM vendors where id='$id'";    // 	echo "$sql";exit;    $result = mysqli_query($connection,$sql) or die ("Couldn't execute query. $sql");    echo "That vendor has been removed from the list of vendors for $parkcode.<br /><br />You can close this window.";    exit;}echo "<script language=\"JavaScript\"><!--function setForm() {    opener.document.acsForm.vendor_number.value = document.inputForm1.inputField0.value;    opener.document.acsForm.vendor_name.value = document.inputForm1.inputField1.value;    opener.document.acsForm.vendor_address.value = document.inputForm1.inputField2.value;    opener.document.acsForm.group_number.value = document.inputForm1.inputField3.value;    opener.document.acsForm.pay_entity.value = document.inputForm1.inputField4.value;    opener.document.acsForm.ncas_remit_code.value = document.inputForm1.inputField5.value;    opener.document.acsForm.comments.value = document.inputForm1.inputField6.value;    opener.document.acsForm.ncas_number.value = document.inputForm1.inputField7.value;    self.close();    return false;}function MM_jumpMenu(targ,selObj,restore){ //v3.0  eval(targ+\".location='\"+selObj.options[selObj.selectedIndex].value+\"'\");  if (restore) selObj.selectedIndex=0;}//--></script>";if(!@$beta){    foreach (range('A', 'Z') as $letter)    {        $alphaArray[]=$letter;    }    //print_r($alphaArray);exit;    mysqli_select_db($connection,'dpr_system'); // database    // Use this for Districts - builds list of parks for drop down    $sql_parkcodes = "SELECT t1.parkcode, t1.county, t2.park_name, t2.district    From dprunit as t1    LEFT JOIN parkcode_names as t2 on t1.parkcode=t2.park_code    WHERE 1     ORDER by t1.parkcode";    // Use this for Regions    // $sql_parkcodes = "SELECT t1.parkcode, t1.county, t2.park_name, t2.district, t2.region    // From dprunit_region as t1    // LEFT JOIN parkcode_names as t2 on t1.parkcode=t2.park_code    // WHERE 1     // ORDER by t1.parkcode";    //echo "$sql"; //exit;    $result_parkcodes = mysqli_query($connection,$sql_parkcodes) or die ("Couldn't execute query. $sql_parkcodes");    while ($row_parkcodes=mysqli_fetch_array($result_parkcodes))        {        $parkCode[]=$row_parkcodes['parkcode']; // fill array with all parks        }      array_unshift($parkCode,"WARE");    sort($parkCode);    //echo "<pre>"; print_r($parkCode); echo "</pre>"; // exit;    echo "<html><table>";    $numParkCode=count($parkCode);    //<A HREF=\"javascript:window.print()\">    //<IMG SRC=\"../bar_icon_print_2.gif\" BORDER=\"0\"></A>    //if($beacnum=='60033211' or $beacnum=='60032988'){echo "Line 80:shannon and pam";}	    // Budget Office work: this IF statement gives each beacnum the ability to see all parks in a drop-down on the Pay Invoices screen -- cc    // 5/12/17 per Tammy request: Parks only see their OWN Park, not all Parks    //tammy dodd,rebecca owen,rachel gooding,jennifer goss,laura fuller, val mitchener    if($beacnum=='60032781' or $beacnum=='60033242' or $beacnum=='60032997' or $beacnum=='60032787' or $beacnum=='60032794' or $beacnum=='60033093')    {        echo "<tr><td>        <select name='parkcode' onChange=\"MM_jumpMenu('parent',this,0)\">";                 foreach($parkCode as $k=>$scode)        {                           if($scode=="ARCH"){$scode="ADM";}            if(!isset($parkcode)){$parkcode="";}            // populate vendor drop-down            if($scode==$parkcode)                {                    $s="selected";}            else{                    $s="value";                }            echo "<option $s='vendor.php?parkcode=$scode'>$scode\n";        }        echo "</select></form></td></tr>";    }  // end Budget Office work    // 2022-09-27:  CCOOPER - give Annette Hall (60032931) access to a park drop down on the pay invoices screen to select STMO and WEDI (did not open to all district parks to reduce errors)    // if we want to implement as a district functionality, use a dist list for the 'in_array' function (define above)    if($beacnum=='60032931')    {        echo "<tr><td>        <select name='parkcode' onChange=\"MM_jumpMenu('parent',this,0)\">";                 foreach($parkCode as $k=>$scode)        {                               if(!isset($parkcode)){$parkcode="";}                    if($scode==$parkcode)                {$s="selected";}            else                {$s="value";}            if(in_array($scode,array("WEDI","STMO")))                {                    echo "<option $s='vendor.php?parkcode=$scode'>$scode\n";                }        }        echo "</select></form></td></tr>";    } // 2022-09-27: end CCOOPER - Annette Hall parks    echo "<tr><td><form><select name=\"vendor_number\" onChange=\"MM_jumpMenu('parent',this,0)\"><option selected>[$parkcode] Vendor Name Begins With:</option>";$s="value";    for ($n=0;$n<count($alphaArray);$n++)    {        $con="vendor.php?alpha=".$alphaArray[$n]."&parkcode=".$parkcode;    	echo "<option $s='$con'>$alphaArray[$n]\n";    }               echo "</select></form></td>";       //tammy dodd,rebecca owen,rachel gooding,jennifer goss,laura fuller       if($beacnum=='60032781' or $beacnum=='60033242' or $beacnum=='60032997' or $beacnum=='60032787' or $beacnum=='60032794' or $beacnum=='60033093')        {            echo "<td><form><select name=\"vendor_number\" onChange=\"MM_jumpMenu('parent',this,0)\"><option selected>[All] Vendor Name Begins With:</option>";$s="value";            for ($n=0;$n<count($alphaArray);$n++)            {                $con="vendor.php?alpha=".$alphaArray[$n]."&pc=1";        		echo "<option $s='$con'>$alphaArray[$n]\n";            }                           echo "</select></td>";       }       echo "</tr>";       echo "</form>";}  // end of IF(!@$beta)mysqli_select_db($connection,$database);if(@$alpha!=""){    $test=$_SESSION['budget']['level'];    if($test==1)    {        if(empty($_SESSION)){session_start();}        $parkcode=$_SESSION['budget']['select'];    }    if(!@$pc)    {        $where="and parkcode='$parkcode'";    }    else    {        $where="";    }    $sql = "SELECT vendor_name,parkcode,vendor_number,id From vendors where vendor_name like '$alpha%' $where ORDER BY vendor_name";        //echo "$sql";exit;    $result = mysqli_query($connection,$sql) or die ("line 102 Couldn't execute query. $sql");    $num=mysqli_num_rows($result);    while($row=mysqli_fetch_array($result))    {        extract($row);        $v_name[]=strtoupper($vendor_name)."-".$parkcode;        //$v_num[]=$vendor_number;        $v_id[]=$id;    }    echo "<tr><td colspan='2'><form><select name=\"beta\" onChange=\"MM_jumpMenu('parent',this,0)\"><option selected>Vendor Name Is:</option>";$s="value";    for ($n=0;$n<count($v_id);$n++)    {        $con="vendor.php?beta=".$v_id[$n];    	echo "<option $s='$con'>$v_name[$n]\n";    }               echo "</select></form></td></tr>";}if(@$beta!=""){    echo "<form name=\"inputForm1\" onSubmit=\"return setForm();\">";    $sql = "SELECT vendor_name,vendor_address,vendor_number,group_number,pay_entity,remit_code as ncas_remit_code,account_vendor,comments,account_optional, parkcode            From vendors             where id='$beta'";    //echo "$sql";exit;    $result = mysqli_query($connection,$sql) or die ("line 126 Couldn't execute query. $sql");    $num=mysqli_num_rows($result);    $row=mysqli_fetch_array($result);    extract($row);    echo "<table>    <tr><td><input name='inputField0' type='text' value='$vendor_number' size='30'> Vendor Number</td></tr>    <tr><td><textarea name='inputField1' cols='45' rows='3'>$vendor_name</textarea> Vendor Name</td></tr>    <tr><td><textarea name='inputField2' cols='45' rows='3'>$vendor_address</textarea> Vendor Address</td></tr>    <tr><td><input name='inputField3' type='text' value='$group_number' size='4'> Group Number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input name='inputField4' type='text' value='$pay_entity' size='4'> Pay Entity</td></tr>    <tr><td><textarea name='inputField5' cols='45' rows='3'>$ncas_remit_code</textarea> Remit Code (Customer#)</td></tr>    <tr><td><textarea name='inputField6' cols='45' rows='3'>$comments</textarea> Comments</td></tr>    <tr><td><textarea name='inputField7' cols='35' rows='1'>$account_optional</textarea> Use this Account #</td></tr>    ";    echo "    <tr><td><input type='submit' value='Update Code Sheet'></form></td></tr></table>";    // echo "<form method='POST'><table align='right'>    // <tr><td>    // Remove this Vendor from $parkcode<br />    // <input type='hidden' name='id' value=\"$beta\">    // <input type='hidden' name='parkcode' value=\"$parkcode\">    // <input type='submit' name='submit_form' value=\"Delete\" onclick=\"return confirm('Are you sure you want to delete?')\">    // </td></tr>    // </table></form>";}?>