<?phpinclude("../../include/authSYSEXP.inc");include("../../include/connectSYSEXP.inc");function test_alter(&$item1, $key) { // used to put - in place of a rec 0    if($key != "name" and $item1 == 0){$item1 = "-";}else{$item1=$item1;}}// gets data from db $t and siteif($t!="rec" and $t!="spe"){$where = "WHERE potential=''";$order="ORDER BY site.name,theme";}elseif($t=="spe"){$where = "";$order="ORDER BY site.name,species";}else{$where = "";$order="ORDER BY site.name";}$sql = "SELECT $t.*,site.sid,site.nameFROM $tLEFT JOIN site on $t.sid=site.sid$where$order";// echo "$sql";exit;switch ($t) {    case $t == "arc":        $title = "Archeological";        break;    case $t == "bio":        $title = "Biological";        break;    case $t == "geo":        $title = "Geological";        break;    case $t == "sce":        $title = "Scenic";        break;    case $t == "spe":        $title = "Species";        break;    case $t == "rec":        $title = "Recreation";        break;} // end Switchecho "<html><head><title>$t Theme</title><STYLE TYPE=\"text/css\"><!--body{font-family:sans-serif;background-color:beige;}td{font-size:85%;}th{font-size:85%;}--> </STYLE> </head>";$result = @mysql_query($sql, $connection) or die("Error #". mysql_errno() . ": " . mysql_error());$numRow = @mysql_num_rows($result);if($numRow > 0){if($t=="rec"){// Recreation sectionecho "<div align='center'>$title Summary</div><table>    <tr><td><u>Site Name</u></td>    <td align='center' valign='bottom'>Fish<br>Fresh<br>*<u>10</u></td>    <td align='center' valign='bottom'>Camping<br>Tent<br>*<u>10</u></td>    <td align='center' valign='bottom'>Beach<br>*<u>10</u></td>    <td align='center' valign='bottom'>Picnicking<br>*<u>10</u></td>    <td align='center' valign='bottom'>Cultural<br>*<u>10</u></td>    <td align='center' valign='bottom'>Visting<br>NatArea<br>*<u>7</u></td>    <td align='center' valign='bottom'>Visting<br>HisArea<br>*<u>7</u></td>    <td align='center' valign='bottom'>Biking<br>*5</u></td>    <td align='center' valign='bottom'>Hiking<br>*<u>4</u></td>    <td align='center' valign='bottom'>Open<br>Space<br>*<u>4</u></td><td align='center' valign='bottom'>Swim<br>*<u>4</u></td><td align='center' valign='bottom'>Fish<br>Salt<br>*<u>4</u></td><td align='center' valign='bottom'>Scenic<br>*<u>4</u></td><td align='center' valign='bottom'>Camping<br>Prim<br>*<u>2.5</u></td><td align='center' valign='bottom'>Horse<br>*<u>1</u></td><td align='center' valign='bottom'>Boat<br>*<u>0.5</u></td><td align='center' valign='bottom'>Nature<br>Study<br>*<u>0.5</u></td><td align='center' valign='bottom'>Canoe<br>*<u>0.5</u></td><td align='center' valign='bottom'>Ski<br>*<u>0.5</u></td><td align='center' valign='bottom'>Sail<br>*<u>0.5</u></td></tr>";    $siteCheck="";while ($row = mysql_fetch_array($result)) {array_walk($row, 'test_alter'); // this replaces all 0s with a -extract($row);    if($name!=$siteCheck){$nameX="<a href='site.php?sid=$sid'>$name</a>";   if($c==''){$t="bgcolor='#CCFFCC'";$c=1;}else{$t="";$c='';}$total=(($fishfresh*10)+($camptent*10)+($beach*10)+($picnick*10)+($cultural*10)+($natArea*7)+($hisArea*7)+($bike*5)+($hike*4)+($openArea*4)+($swim*4)+($fishSalt*4)+($scenic*4)+($campPrim*2.5)+($horse*1)+($boat*0.5)+($nature*0.5)+($canoe*0.5)+($ski*0.5));$total=round($total);     echo "<tr><td align='left' $t>$nameX</td><td align='center' $t>$fishfresh</td><td align='center' $t>$camptent</td><td align='center' $t>$beach</td><td align='center' $t>$picnick</td><td align='center' $t>$cultural</td><td align='center' $t>$natArea</td><td align='center' $t>$hisArea</td><td align='center' $t>$bike</td><td align='center' $t>$hike</td><td align='center' $t>$openArea</td><td align='center' $t>$swim</td><td align='center' $t>$fishSalt</td><td align='center' $t>$scenic</td><td align='center' $t>$campPrim</td><td align='center' $t>$horse</td><td align='center' $t>$boat</td><td align='center' $t>$nature</td><td align='center' $t>$canoe</td><td align='center' $t>$ski</td><td align='center' $t>$sail</td><td align='right' $t><b>$total</b></td></tr>";    $totalSite="";    $totalSite=$totalSite + $total;    }// $name != $siteCheck    else    {$nameX="";    $total=$priority+$threat+$rarity+$quality;    $totalSite=$totalSite + $total;       }// $name == $siteCheck    $siteCheck=$name;    }// end whileecho "<tr><td><u>Site Name</u></td>    <td align='center' valign='bottom'>Fish<br>Fresh<br>*<u>10</u></td>    <td align='center' valign='bottom'>Camping<br>Tent<br>*<u>10</u></td>    <td align='center' valign='bottom'>Beach<br>*<u>10</u></td>    <td align='center' valign='bottom'>Picnicking<br>*<u>10</u></td>    <td align='center' valign='bottom'>Cultural<br>*<u>10</u></td>    <td align='center' valign='bottom'>Visting<br>NatArea<br>*<u>7</u></td>    <td align='center' valign='bottom'>Visting<br>HisArea<br>*<u>7</u></td>    <td align='center' valign='bottom'>Biking<br>*5</u></td>    <td align='center' valign='bottom'>Hiking<br>*<u>4</u></td>    <td align='center' valign='bottom'>Open<br>Space<br>*<u>4</u></td><td align='center' valign='bottom'>Swim<br>*<u>4</u></td><td align='center' valign='bottom'>Fish<br>Salt<br>*<u>4</u></td><td align='center' valign='bottom'>Scenic<br>*<u>4</u></td><td align='center' valign='bottom'>Camping<br>Prim<br>*<u>2.5</u></td><td align='center' valign='bottom'>Horse<br>*<u>1</u></td><td align='center' valign='bottom'>Boat<br>*<u>0.5</u></td><td align='center' valign='bottom'>Nature<br>Study<br>*<u>0.5</u></td><td align='center' valign='bottom'>Canoe<br>*<u>0.5</u></td><td align='center' valign='bottom'>Ski<br>*<u>0.5</u></td><td align='center' valign='bottom'>Sail<br>*<u>0.5</u></td></tr></table>";exit;} // end if recreationif($t=="spe"){// Species sectionecho "<div align='center'>$title Summary</div><table>    <tr><td><u>Site Name</u></td><td align='center'><u>sciName</u></td><td align='center'><u>comName</u></td><td align='center'><u>Score</u></td></tr>";    $siteCheck="";while ($row = mysql_fetch_array($result)) {    extract($row);   $total=$score;    if($name!=$siteCheck){$nameX="<a href='site.php?sid=$sid'>$name</a>";     echo "<tr><td></td><td></td><td></td><td align='right'><b>$totalSite</b></td></tr><tr><td>$nameX</td><td><i>$species</i></td><td align='left'>$Cname</td><td align='right'>$total</td></tr>";    $totalSite="";    $totalSite=$totalSite + $total;    }// $name != $siteCheck    else    {$nameX="";    $total=$score;    $totalSite=$totalSite + $total;    echo "<tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td>$nameX</td><td><i>$species</i></td><td align='left'>$Cname</td><td align='right'>$total</td></tr>";    }// $name == $siteCheck    $siteCheck=$name;    }// end whileecho "<tr><td></td><td></td><td></td><td align='right'><b>$totalSite</b></td></tr></table>";exit;} // end if speciesif($t !="rec" and $t !="spe"){// Neither Recreation nor Speceis section echo "<div align='center'>$title Summary</div><table>    <tr><td><u>Site Name</u></td><td><u>Theme</u></td><td><u>Priority</u></td><td><u>Threat</u></td><td><u>Rarity</u></td><td><u>Quality</u></td><td><u>Total</u></td></tr>";    $siteCheck="";while ($row = mysql_fetch_array($result)) {    extract($row);    if($name!=$siteCheck){$nameX="<a href='site.php?sid=$sid'>$name</a>";   $total=$priority+$threat+$rarity+$quality;     echo "<tr><td></td><td></td><td></td><td></td><td></td><td></td><td align='center'><b>$totalSite</b></td></tr><tr><td>$nameX</td><td>$theme</td><td align='center'>$priority</td><td align='center'>$threat</td><td align='center'>$rarity</td><td align='center'>$quality</td><td align='center'>$total</td></tr>";    $totalSite="";    $totalSite=$totalSite + $total;    }// $name != $siteCheck    else    {$nameX="";    $total=$priority+$threat+$rarity+$quality;    $totalSite=$totalSite + $total;    echo "<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>$nameX</td><td>$theme</td><td align='center'>$priority</td><td align='center'>$threat</td><td align='center'>$rarity</td><td align='center'>$quality</td><td align='center'>$total</td></tr>";    }// $name == $siteCheck    $siteCheck=$name;    }// end whileecho "<tr><td></td><td></td><td></td><td></td><td></td><td></td><td align='center'><b>$totalSite</b></td></tr></table>";} // end else $t != rec and != spe}// end if $numRowecho "</body></html>";?>