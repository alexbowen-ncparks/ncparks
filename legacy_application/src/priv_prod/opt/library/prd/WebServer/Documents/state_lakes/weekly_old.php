<?php$database="state_lakes";include("../../include/connectROOT.inc");// database connection parameters$db = mysql_select_db($database,$connection)       or die ("Couldn't select database $database");$tab="Reports";include("menu.php");//echo "<pre>"; print_r($_REQUEST); echo "</pre>"; // exit;extract($_REQUEST);$today=date("D, Y-m-d");$past_week=date("Y-m-d",mktime(0, 0, 0, date("m"), date("d")-7,   date("Y")));$past_weekday=date("D, Y-m-d",mktime(0, 0, 0, date("m"), date("d")-7,   date("Y")));$pier_list="contacts_id, Park, Fee, Check_Number, pier_payment as payment_date";$fee_array=array("piers","buoy","ramp","swim_line");	foreach($fee_array as $k=>$v)		{		if($k=="piers"){$payment_date="t1.pier_payment";}			else			{$payment_date="t1.".$v."_receipt";}		$sql="SELECT park, contacts_id, sum(fee) as fee				FROM $v as t1				where $payment_date >= '$past_week' and park='$park'				group by t1.contacts_id				"; //echo "$sql<br />";				$result=mysql_query($sql) or die ("Couldn't execute query. $sql c=$connection");				$row=mysql_fetch_assoc($result);				$ARRAY[$v]=$row;				${$v."_fee"}=$v."=$".$row['fee'];				$total_fee+=$row['fee'];		}function array_sum_key( $arr, $index = null ){    if(!is_array( $arr ) || sizeof( $arr ) < 1){        return 0;    }    $ret = 0;    foreach( $arr as $id => $data ){        if( isset( $index )  ){            $ret += (isset( $data[$index] )) ? $data[$index] : 0;        }else{            $ret += $data;        }    }    return $ret;}//echo "<pre>"; print_r($ARRAY); echo "</pre>";  exit;echo "<table border='1'><tr><th colspan='9'>Payments received from $past_weekday to $today</th></tr><tr>";	foreach($ARRAY[0] as $fld=>$array)		{		if($array){echo "<th>$fld</th>";}				}	echo "</tr>";		foreach($ARRAY as $num=>$array)	{		echo "<tr>";		foreach($array as $k=>$v)			{			if($v){echo "<td>$v</td>";}					}		echo "</tr>";	}echo "</table></body></html>";?>