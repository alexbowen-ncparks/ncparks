<?php//echo "hello";exit;extract($_REQUEST);// ********** Get Field Types *********$sql="SHOW COLUMNS FROM  beacon_payments"; $result = @mysqli_query($connection, $sql,$connection);while($row=mysqli_fetch_assoc($result)){$allFields[]=$row[Field];if(strpos($row[Type],"decimal")>-1){	$decimalFields[]=$row['Field'];	$tempVar=explode(",",$row[Type]);	$decPoint[$row['Field']]=trim($tempVar[1],")");	}}// ********** Edit row ************$editFlds=$fieldNames;$excludeFields=array("listid");		if(!in_array($k1,$excludeFields) AND $edit==$v['listid']){		$v1="<input type='text' name='$k1' value='$v1'>";}				// ******** Enter your SELECT statement here **********$database="budget";$db="budget";include("/opt/library/prd/WebServer/include/iConnect.inc"); // connection parametersmysqli_select_db($connection, $database); // database$query = "select position_number,employee_name,employee_id,amount as 'posted_payments',payment_date,center,center_code,idfrom beacon_paymentswhere valid_entry='y'and position_number='$position_number'and center_code='$center_code'and f_year='$f_year'group by idorder by position_number,payment_date,employee_name;"; $result = @mysqli_query($connection, $query,$connection);if($showSQL=="1"){echo "$query<br><br>";}$decimalFields=array('posted_payments');while($row=mysqli_fetch_assoc($result)){$ARRAY[]=$row;}$num=count($ARRAY);$fieldNames=array_values(array_keys($ARRAY[0]));echo "<html><table border='1' cellpadding='2'><tr><td colspan='3'><font color='red'>$num records</font></td></tr>";echo "<tr>";foreach($fieldNames as $k=>$v){$v=str_replace("_"," ",$v);echo "<th>$v</th>";}echo "</tr>";//$editFlds=$fieldNames;$excludeFields=array("listid","emid","tempID");$excludeFields=$fieldNames;//echo "<form method='POST'>"; /// Optionalforeach($ARRAY as $k=>$v){// each rowecho "<tr>";	foreach($v as $k1=>$v1){// field name=$k1  value=$v1		$var=$v1;			if(in_array($k1,$decimalFields)){		if(substr($v['payment_date'],0,4)==date(Y)){			$YRtotal+=$v1;			}			$total[$k1]+=$v1;			$var=number_format($v1,2);							}				echo "<td align='right'>$var</td>";}	echo "</tr>";$update="";}echo "<tr>";foreach($fieldNames as $k=>$v){if($total[$v]){$val=number_format($total[$v],2);}else{$val="";}if($v=="payment_date"){$val=number_format($YRtotal,2)."<br />for ".date(Y);}echo "<th>$val</th>";}echo "</tr>";echo "</table></body></html>";   ?>